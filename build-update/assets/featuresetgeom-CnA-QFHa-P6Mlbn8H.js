import{B as S,v as R,M as p,r as a,T as o,n as l}from"./languageUtils-Bxl5LDSi-BsTvWa0J.js";import{Y as d}from"./TimeOnly-BR6daUyu-BGOh8DJt.js";import{E as c,I as w}from"./SpatialFilter-B020SSmx-DtHXBtbR.js";import{Y as u}from"./story-u82SUoyt.js";import{relate as y,crosses as I,touches as F,within as A,overlaps as C,contains as P,intersects as h}from"./geometryEngineAsync-BiWvQc1r-SzZi5wsY.js";import"./ImmutableArray-CiJxhY8_-Kqx7aWRu.js";import"./shared-CWBqh2zd-DbZF0kO5.js";import"./number-BJi_xsDz-CEICM6uM.js";import"./arcadeUtils-BUv04XWE-CIxSxWWO.js";import"./main-CmCzAIzx.js";import"./WhereClause-D233Ox-8-BsuEUZuW.js";function f(r){return r instanceof u}function s(r,t,i,m){return m(r,t,async(v,n,e)=>{if(e.length<2)throw new o(r,l.WrongNumberOfParameters,t);if((e=S(e))[0]===null&&e[1]===null)return!1;if(a(e[0])){if(e[1]instanceof u)return new w({parentfeatureset:e[0],relation:i,relationGeom:e[1]});if(e[1]===null)return new c({parentfeatureset:e[0]});throw new o(r,l.InvalidParameter,t)}if(f(e[0])){if(f(e[1])){switch(i){case"esriSpatialRelEnvelopeIntersects":return h(d(e[0]),d(e[1]));case"esriSpatialRelIntersects":return h(e[0],e[1]);case"esriSpatialRelContains":return P(e[0],e[1]);case"esriSpatialRelOverlaps":return C(e[0],e[1]);case"esriSpatialRelWithin":return A(e[0],e[1]);case"esriSpatialRelTouches":return F(e[0],e[1]);case"esriSpatialRelCrosses":return I(e[0],e[1])}throw new o(r,l.InvalidParameter,t)}if(a(e[1]))return new w({parentfeatureset:e[1],relation:i,relationGeom:e[0]});if(e[1]===null)return!1;throw new o(r,l.InvalidParameter,t)}if(e[0]===null){if(a(e[1]))return new c({parentfeatureset:e[1]});if(e[1]instanceof u||e[1]===null)return!1}throw new o(r,l.InvalidParameter,t)})}function L(r){r.mode==="async"&&(r.functions.intersects=function(t,i){return s(t,i,"esriSpatialRelIntersects",r.standardFunctionAsync)},r.functions.envelopeintersects=function(t,i){return s(t,i,"esriSpatialRelEnvelopeIntersects",r.standardFunctionAsync)},r.signatures.push({name:"envelopeintersects",min:2,max:2}),r.functions.contains=function(t,i){return s(t,i,"esriSpatialRelContains",r.standardFunctionAsync)},r.functions.overlaps=function(t,i){return s(t,i,"esriSpatialRelOverlaps",r.standardFunctionAsync)},r.functions.within=function(t,i){return s(t,i,"esriSpatialRelWithin",r.standardFunctionAsync)},r.functions.touches=function(t,i){return s(t,i,"esriSpatialRelTouches",r.standardFunctionAsync)},r.functions.crosses=function(t,i){return s(t,i,"esriSpatialRelCrosses",r.standardFunctionAsync)},r.functions.relate=function(t,i){return r.standardFunctionAsync(t,i,async(m,v,n)=>{if(n=S(n),R(n,3,3,t,i),f(n[0])&&f(n[1]))return y(n[0],n[1],p(n[2]));if(n[0]instanceof u&&n[1]===null||n[1]instanceof u&&n[0]===null)return!1;if(a(n[0])&&n[1]===null)return new c({parentfeatureset:n[0]});if(a(n[1])&&n[0]===null)return new c({parentfeatureset:n[1]});if(a(n[0])&&n[1]instanceof u)return n[0].relate(n[1],p(n[2]));if(a(n[1])&&n[0]instanceof u)return n[1].relate(n[0],p(n[2]));if(n[0]===null&&n[1]===null)return!1;throw new o(t,l.InvalidParameter,i)})})}export{L as registerFunctions};
