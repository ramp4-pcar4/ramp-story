import{e5 as m,uw as _,ux as B,uy as g,jp as S,D as b,uz as w,L as h,kO as O,C as j,q as I,jg as l,gI as A}from"./story-u82SUoyt.js";import{A as R,h as T}from"./Indices-CMOcLwPM-B5L201xu.js";function q(e,r){d(e.typedBuffer,r.typedBuffer,e.typedBufferStride,r.typedBufferStride)}function d(e,r,f=2,n=f){const o=r.length/2;let t=0,u=0;if(m(r)||_(r)){for(let i=0;i<o;++i)e[t]=r[u],e[t+1]=r[u+1],t+=f,u+=n;return}const s=B(r);if(g(r))for(let i=0;i<o;++i)e[t]=Math.max(r[u]/s,-1),e[t+1]=Math.max(r[u+1]/s,-1),t+=f,u+=n;else for(let i=0;i<o;++i)e[t]=r[u]/s,e[t+1]=r[u+1]/s,t+=f,u+=n}function x(e,r,f,n){const o=e.typedBuffer,t=e.typedBufferStride,u=n?.count??e.count;let s=(n?.dstIndex??0)*t;for(let i=0;i<u;++i)o[s]=r,o[s+1]=f,s+=t}Object.freeze(Object.defineProperty({__proto__:null,fill:x,normalizeIntegerBuffer:d,normalizeIntegerBufferView:q},Symbol.toStringTag,{value:"Module"}));function z(e,r){y(e.typedBuffer,r.typedBuffer,e.typedBufferStride,r.typedBufferStride)}function y(e,r,f=3,n=f){const o=r.length/n;let t=0,u=0;for(let s=0;s<o;++s)e[t]=r[u],e[t+1]=r[u+1],e[t+2]=r[u+2],t+=f,u+=n}function L(e,r,f,n,o){const t=e.typedBuffer,u=e.typedBufferStride,s=o?.count??e.count;let i=(o?.dstIndex??0)*u;for(let a=0;a<s;++a)t[i]=r,t[i+1]=f,t[i+2]=n,i+=u}Object.freeze(Object.defineProperty({__proto__:null,copy:y,copyView:z,fill:L},Symbol.toStringTag,{value:"Module"}));function M(e,r){p(e.typedBuffer,r,e.typedBufferStride)}function p(e,r,f=4){const n=r.typedBuffer,o=r.typedBufferStride,t=r.count;let u=0,s=0;for(let i=0;i<t;++i)e[u]=n[s],e[u+1]=n[s+1],e[u+2]=n[s+2],e[u+3]=n[s+3],u+=f,s+=o}function U(e,r,f,n,o,t){const u=e.typedBuffer,s=e.typedBufferStride,i=t?.count??e.count;let a=(t?.dstIndex??0)*s;for(let c=0;c<i;++c)u[a]=r,u[a+1]=f,u[a+2]=n,u[a+3]=o,a+=s}Object.freeze(Object.defineProperty({__proto__:null,copy:p,copyView:M,fill:U},Symbol.toStringTag,{value:"Module"}));class V{constructor(r){this._streamDataRequester=r}async loadJSON(r,f){return this._load("json",r,f)}async loadBinary(r,f){return S(r)?(b(f),w(r)):this._load("binary",r,f)}async loadImage(r,f){return this._load("image",r,f)}async _load(r,f,n){if(this._streamDataRequester==null)return(await h(f,{responseType:v[r]})).data;const o=await O(this._streamDataRequester.request(f,r,n));if(o.ok===!0)return o.value;throw j(o.error),new I("glt-loader-request-error",`Request for resource failed: ${o.error}`)}}const v={image:"image",binary:"array-buffer",json:"json","image+type":void 0};function k(e,r){switch(r){case l.TRIANGLES:return D(e);case l.TRIANGLE_STRIP:return E(e);case l.TRIANGLE_FAN:return N(e)}}function D(e){return typeof e=="number"?R(e):A(e)?new Uint16Array(e):e}function E(e){const r=typeof e=="number"?e:e.length;if(r<3)return[];const f=r-2,n=T(3*f);if(typeof e=="number"){let o=0;for(let t=0;t<f;t+=1)t%2==0?(n[o++]=t,n[o++]=t+1,n[o++]=t+2):(n[o++]=t+1,n[o++]=t,n[o++]=t+2)}else{let o=0;for(let t=0;t<f;t+=1)t%2==0?(n[o++]=e[t],n[o++]=e[t+1],n[o++]=e[t+2]):(n[o++]=e[t+1],n[o++]=e[t],n[o++]=e[t+2])}return n}function N(e){const r=typeof e=="number"?e:e.length;if(r<3)return new Uint16Array(0);const f=r-2,n=f<=65536?new Uint16Array(3*f):new Uint32Array(3*f);if(typeof e=="number"){let s=0;for(let i=0;i<f;++i)n[s++]=0,n[s++]=i+1,n[s++]=i+2;return n}const o=e[0];let t=e[1],u=0;for(let s=0;s<f;++s){const i=e[s+2];n[u++]=o,n[u++]=t,n[u++]=i,t=i}return n}const C=2.1;export{x as B,k as E,C as G,U as S,V as U,z as _,L as b,d as c,y as d,M as g,q as m,p as y};
