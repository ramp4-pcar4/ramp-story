import{gi as h,lM as U,eP as p,jq as _,j9 as T,gj as E,oE as a,gv as C,oD as O}from"./story-u82SUoyt.js";function w(e,i,n="nearest",s=!1){const r=!(s&&i.pixelType==="u8"),o=r?p.FLOAT:p.UNSIGNED_BYTE,u=i.pixels==null||i.pixels.length===0?null:r?i.getAsRGBAFloat():i.getAsRGBA(),f=e.capabilities.textureFloatLinear,t=new h;return t.width=i.width,t.height=i.height,t.internalFormat=r?U.RGBA32F:C.RGBA,t.samplingMode=!f||n!=="bilinear"&&n!=="cubic"?_.NEAREST:_.LINEAR,t.dataType=o,t.wrapMode=T.CLAMP_TO_EDGE,new E(e,t,u)}function M(e,i){const{spacing:n,offsets:s,coefficients:r,size:[o,u]}=i,f=n[0]>1,t=new h;t.width=f?4*o:o,t.height=u,t.internalFormat=U.RGBA32F,t.dataType=p.FLOAT,t.samplingMode=_.NEAREST,t.wrapMode=T.CLAMP_TO_EDGE;const m=new Float32Array(f?o*u*16:2*s.length);if(f&&r!=null)for(let c=0,l=0;c<r.length;c++)m[l++]=r[c],c%3==2&&(m[l++]=1);else for(let c=0;c<u;c++)for(let l=0;l<o;l++){const g=4*(c*o+l),A=2*(l*u+c);m[g]=s[A],m[g+1]=s[A+1],m[g+3]=s[A]===-1?0:1}return new E(e,t,m)}function L(e,i){const n=new h;return n.internalFormat=C.RGBA,n.width=i.length/4,n.height=1,n.samplingMode=_.NEAREST,n.wrapMode=T.CLAMP_TO_EDGE,new E(e,n,i)}function x(e,i,n,s=1,r=!0){return{u_flipY:r,u_applyTransform:!!e,u_opacity:s,u_transformSpacing:e?e.spacing:O,u_transformGridSize:e?e.size:O,u_targetImageSize:i,u_srcImageSize:n}}function F(e,i){return{u_colormapOffset:i||0,u_colormapMaxIndex:e?e.length/4-1:0}}function V(e,i){return{u_scale:e,u_offset:i}}function G(e){return{u_bandCount:e.bandCount,u_minOutput:e.outMin,u_maxOutput:e.outMax,u_minCutOff:e.minCutOff,u_maxCutOff:e.maxCutOff,u_factor:e.factor,u_useGamma:e.useGamma,u_gamma:e.gamma,u_gammaCorrection:e.gammaCorrection}}function k(e){return{u_hillshadeType:e.hillshadeType,u_sinZcosAs:e.sinZcosAs,u_sinZsinAs:e.sinZsinAs,u_cosZs:e.cosZs,u_weights:e.weights,u_factor:e.factor,u_minValue:e.minValue,u_maxValue:e.maxValue}}function v(e,i){const n=e.gl,s=i.glName,r=new Map;if(s==null)return r;const o=n.getProgramParameter(s,n.ACTIVE_UNIFORMS);let u;for(let f=0;f<o;f++)u=n.getActiveUniform(s,f),u&&r.set(u.name,{location:n.getUniformLocation(s,u.name),info:u});return r}function B(e,i,n){Object.keys(n).forEach(s=>{const r=i.get(s)||i.get(s+"[0]");r&&b(e,s,n[s],r)})}function N(e,i,n,s){n.length===s.length&&(s.some(r=>r==null)||n.some(r=>r==null)||n.forEach((r,o)=>{i.setUniform1i(r,o),e.bindTexture(s[o],o)}))}function b(e,i,n,s){if(s===null||n==null)return!1;const{info:r}=s;switch(r.type){case a.FLOAT:r.size>1?e.setUniform1fv(i,n):e.setUniform1f(i,n);break;case a.FLOAT_VEC2:e.setUniform2fv(i,n);break;case a.FLOAT_VEC3:e.setUniform3fv(i,n);break;case a.FLOAT_VEC4:e.setUniform4fv(i,n);break;case a.FLOAT_MAT3:e.setUniformMatrix3fv(i,n);break;case a.FLOAT_MAT4:e.setUniformMatrix4fv(i,n);break;case a.INT:r.size>1?e.setUniform1iv(i,n):e.setUniform1i(i,n);break;case a.BOOL:e.setUniform1i(i,n?1:0);break;case a.INT_VEC2:case a.BOOL_VEC2:e.setUniform2iv(i,n);break;case a.INT_VEC3:case a.BOOL_VEC3:e.setUniform3iv(i,n);break;case a.INT_VEC4:case a.BOOL_VEC4:e.setUniform4iv(i,n);break;default:return!1}return!0}export{V as F,v as G,G as L,L as M,x as U,k as V,M as b,B as k,N as v,w,F as x};
